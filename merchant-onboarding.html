<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å•†å®¶å…¥é©» - UNDEFINED</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --brand-green: #2D6A5E;
            --brand-accent: #7FBF6E;
            --neutral-cream: #F5F3EF;
            --neutral-dark: #1A1A2E;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--neutral-cream);
            padding: 40px 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 48px;
        }
        
        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 48px;
            color: var(--brand-green);
            margin-bottom: 16px;
        }
        
        .header p {
            font-size: 18px;
            color: #666;
        }
        
        .form-card {
            background: white;
            border-radius: 16px;
            padding: 48px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        .form-section {
            margin-bottom: 40px;
        }
        
        .form-section-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--neutral-dark);
            margin-bottom: 24px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--neutral-cream);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--neutral-dark);
        }
        
        .form-label .required {
            color: #E53E3E;
        }
        
        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #E5E5E5;
            border-radius: 8px;
            font-size: 15px;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s;
        }
        
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--brand-green);
        }
        
        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .checkbox-group {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .btn-primary {
            width: 100%;
            padding: 16px;
            background: var(--brand-green);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary:hover {
            background: #1F4A40;
            transform: translateY(-2px);
        }
        
        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .alert {
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 24px;
            font-size: 14px;
        }
        
        .alert-success {
            background: #D4EDDA;
            color: #155724;
            border: 1px solid #C3E6CB;
        }
        
        .alert-info {
            background: #D1ECF1;
            color: #0C5460;
            border: 1px solid #BEE5EB;
        }
        
        .info-box {
            background: var(--neutral-cream);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 24px;
        }
        
        .info-box h3 {
            font-size: 16px;
            margin-bottom: 12px;
            color: var(--brand-green);
        }
        
        .info-box ul {
            list-style: none;
            padding-left: 0;
        }
        
        .info-box li {
            padding: 8px 0;
            padding-left: 24px;
            position: relative;
        }
        
        .info-box li:before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: var(--brand-green);
            font-weight: bold;
        }
        
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .form-card {
                padding: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>å•†å®¶å…¥é©»ç”³è¯·</h1>
            <p>åŠ å…¥UNDEFINEDï¼Œå¼€å¯ä½ä½£é‡‘ã€é«˜æ›å…‰çš„é…é€æ–°æ—¶ä»£</p>
        </div>
        
        <div class="form-card">
            <div class="info-box">
                <h3>ğŸ‰ å…¥é©»ä¼˜åŠ¿</h3>
                <ul>
                    <li>ä½ä½£é‡‘ï¼š12-18%ï¼Œè¿œä½äºè¡Œä¸šå¹³å‡</li>
                    <li>å‰100å®¶äº«0%é¦–æœˆä½£é‡‘</li>
                    <li>ä¸“å±Account Manageræ”¯æŒ</li>
                    <li>ç¤¾ä¼šä½¿å‘½é©±åŠ¨ï¼Œæå‡å“ç‰Œå½¢è±¡</li>
                </ul>
            </div>
            
            <div id="message"></div>
            
            <form id="merchantForm" onsubmit="handleSubmit(event)">
                <!-- åŸºæœ¬ä¿¡æ¯ -->
                <div class="form-section">
                    <h2 class="form-section-title">åŸºæœ¬ä¿¡æ¯</h2>
                    
                    <div class="form-group">
                        <label class="form-label">é¤å…åç§° <span class="required">*</span></label>
                        <input type="text" class="form-input" id="restaurantName" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">è”ç³»äººå§“å <span class="required">*</span></label>
                            <input type="text" class="form-input" id="contactName" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">è”ç³»ç”µè¯ <span class="required">*</span></label>
                            <input type="tel" class="form-input" id="contactPhone" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">è¥ä¸šæ‰§ç…§å·</label>
                        <input type="text" class="form-input" id="businessLicense">
                    </div>
                </div>
                
                <!-- é¤å…ä¿¡æ¯ -->
                <div class="form-section">
                    <h2 class="form-section-title">é¤å…ä¿¡æ¯</h2>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">èœç³»ç±»å‹ <span class="required">*</span></label>
                            <select class="form-select" id="cuisine" required>
                                <option value="">è¯·é€‰æ‹©...</option>
                                <option value="ä¸­é¤">ä¸­é¤</option>
                                <option value="æ„å¤§åˆ©èœ">æ„å¤§åˆ©èœ</option>
                                <option value="æ—¥æœ¬æ–™ç†">æ—¥æœ¬æ–™ç†</option>
                                <option value="ç¾å¼">ç¾å¼</option>
                                <option value="æ³°å›½èœ">æ³°å›½èœ</option>
                                <option value="å°åº¦èœ">å°åº¦èœ</option>
                                <option value="ç´ é£Ÿ">ç´ é£Ÿ/å¥åº·</option>
                                <option value="å…¶ä»–">å…¶ä»–</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">åˆ†ç±» <span class="required">*</span></label>
                            <select class="form-select" id="category" required>
                                <option value="">è¯·é€‰æ‹©...</option>
                                <option value="Fine Dining">Fine Dining</option>
                                <option value="Comfort Food">Comfort Food</option>
                                <option value="Healthy & Fresh">Healthy & Fresh</option>
                                <option value="Asian Fusion">Asian Fusion</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">é¤å…åœ°å€ <span class="required">*</span></label>
                        <input type="text" class="form-input" id="address" placeholder="å®Œæ•´åœ°å€ï¼ŒåŒ…å«é—¨ç‰Œå·" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">åŸå¸‚ <span class="required">*</span></label>
                            <input type="text" class="form-input" id="city" value="Amsterdam" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">é‚®ç¼– <span class="required">*</span></label>
                            <input type="text" class="form-input" id="zipcode" placeholder="1012 AB" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">é¤å…ç®€ä»‹</label>
                        <textarea class="form-textarea" id="description" placeholder="ä»‹ç»ä½ çš„é¤å…ç‰¹è‰²ã€æ‹›ç‰Œèœç­‰..."></textarea>
                    </div>
                </div>
                
                <!-- è¿è¥ä¿¡æ¯ -->
                <div class="form-section">
                    <h2 class="form-section-title">è¿è¥ä¿¡æ¯</h2>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">äººå‡æ¶ˆè´¹ <span class="required">*</span></label>
                            <select class="form-select" id="priceRange" required>
                                <option value="">è¯·é€‰æ‹©...</option>
                                <option value="â‚¬">â‚¬ (â‚¬0-15)</option>
                                <option value="â‚¬â‚¬">â‚¬â‚¬ (â‚¬15-30)</option>
                                <option value="â‚¬â‚¬â‚¬">â‚¬â‚¬â‚¬ (â‚¬30+)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">é¢„è®¡é…é€æ—¶é—´</label>
                            <input type="text" class="form-input" id="deliveryTime" placeholder="ä¾‹å¦‚ï¼š25-35 min">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">æœ€ä½èµ·é€é‡‘é¢ (â‚¬)</label>
                            <input type="number" class="form-input" id="minOrder" placeholder="15.00" step="0.01">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">é…é€è´¹ (â‚¬)</label>
                            <input type="number" class="form-input" id="deliveryFee" placeholder="2.50" step="0.01">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">è¥ä¸šæ—¶é—´</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" name="days" value="å‘¨ä¸€"> å‘¨ä¸€
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="days" value="å‘¨äºŒ"> å‘¨äºŒ
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="days" value="å‘¨ä¸‰"> å‘¨ä¸‰
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="days" value="å‘¨å››"> å‘¨å››
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="days" value="å‘¨äº”"> å‘¨äº”
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="days" value="å‘¨å…­"> å‘¨å…­
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="days" value="å‘¨æ—¥"> å‘¨æ—¥
                            </label>
                        </div>
                    </div>
                </div>
                
                <button type="submit" class="btn-primary" id="submitBtn">æäº¤å…¥é©»ç”³è¯·</button>
            </form>
        </div>
    </div>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="/firebase-config.js"></script>
    
    <script>
        async function handleSubmit(event) {
            event.preventDefault();
            
            const btn = document.getElementById('submitBtn');
            const messageDiv = document.getElementById('message');
            
            btn.disabled = true;
            btn.textContent = 'æäº¤ä¸­...';
            messageDiv.innerHTML = '';
            
            try {
                const auth = firebase.auth();
                const db = firebase.firestore();
                const user = auth.currentUser;
                
                if (!user) {
                    throw new Error('è¯·å…ˆç™»å½•');
                }
                
                // è·å–è¡¨å•æ•°æ®
                const days = Array.from(document.querySelectorAll('input[name="days"]:checked'))
                    .map(cb => cb.value);
                
                const merchantData = {
                    name: document.getElementById('restaurantName').value,
                    contactName: document.getElementById('contactName').value,
                    contactPhone: document.getElementById('contactPhone').value,
                    businessLicense: document.getElementById('businessLicense').value,
                    cuisine: document.getElementById('cuisine').value,
                    category: document.getElementById('category').value,
                    address: document.getElementById('address').value,
                    city: document.getElementById('city').value,
                    zipcode: document.getElementById('zipcode').value,
                    description: document.getElementById('description').value,
                    priceRange: document.getElementById('priceRange').value,
                    deliveryTime: document.getElementById('deliveryTime').value,
                    minOrder: parseFloat(document.getElementById('minOrder').value) || 0,
                    deliveryFee: parseFloat(document.getElementById('deliveryFee').value) || 0,
                    openDays: days,
                    userId: user.uid,
                    email: user.email,
                    status: 'pending', // pending, approved, rejected
                    submittedAt: firebase.firestore.FieldValue.serverTimestamp(),
                    active: false
                };
                
                // æäº¤åˆ° Firestore
                await db.collection('merchant_applications').add(merchantData);
                
                messageDiv.innerHTML = `
                    <div class="alert alert-success">
                        <strong>âœ… ç”³è¯·æäº¤æˆåŠŸï¼</strong><br>
                        æˆ‘ä»¬å°†åœ¨1-2ä¸ªå·¥ä½œæ—¥å†…å®¡æ ¸æ‚¨çš„ç”³è¯·ï¼Œå¹¶é€šè¿‡é‚®ä»¶é€šçŸ¥æ‚¨å®¡æ ¸ç»“æœã€‚
                    </div>
                `;
                
                // æ¸…ç©ºè¡¨å•
                document.getElementById('merchantForm').reset();
                btn.textContent = 'å·²æäº¤';
                
                // 3ç§’åè·³è½¬
                setTimeout(() => {
                    window.location.href = '/';
                }, 3000);
                
            } catch (error) {
                console.error('æäº¤é”™è¯¯:', error);
                messageDiv.innerHTML = `
                    <div class="alert alert-error">
                        âŒ æäº¤å¤±è´¥: ${error.message}
                    </div>
                `;
                btn.disabled = false;
                btn.textContent = 'æäº¤å…¥é©»ç”³è¯·';
            }
        }
    </script>
</body>
</html>
